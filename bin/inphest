#!/usr/bin/env php
<?php

use Inphest\Assertions\Assert;
use Inphest\Framework\Console\Io\Input;
use Inphest\Framework\Console\Io\Output;
use Inphest\Framework\Console\RunCommand;
use Inphest\Framework\Factories\TestCaseFactory;

$candidates = [
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../../autoload.php'
];

foreach ($candidates as $candidate) {
    if (file_exists($candidate)) {
        require_once $candidate;
    }
}

if (!class_exists(RunCommand::class)) {
    die('Could not find `vendor/autoload.php`. You probably need to run `composer install`.');
}

$command = new RunCommand(
    new TestCaseFactory(
        new Assert()
    )
);

$command->run(
    new Input($argv),
    new Output()
);
